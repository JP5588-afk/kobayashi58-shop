<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>結帳頁面 | こばやし選物所</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <a href="cart.html" class="back-top-btn">←</a>
  <form id="checkout-form" action="https://formspree.io/f/your-id" method="POST">
    <h2 style="text-align:center; color:#ff69b4; font-weight: bold;">結帳資訊</h2>

    <div class="form-group">
      <label for="name">購買人姓名：</label>
      <input type="text" name="name" required />
    </div>

    <div class="form-group">
      <label for="phone">購買人電話：</label>
      <input type="tel" name="phone" required />
    </div>

    <div class="form-group">
      <label for="payment">支付方式：</label>
      <select name="payment" required>
        <option value="">請選擇</option>
        <option value="銀行轉帳">銀行轉帳</option>
        <option value="信用卡">信用卡</option>
        <option value="全支付">全支付</option>
        <option value="貨到付款">貨到付款</option>
      </select>
    </div>

    <div class="form-group">
      <label for="delivery">取貨方式：</label>
      <select name="delivery" id="delivery-method" required>
        <option value="">請選擇</option>
        <option value="7-11">7-11</option>
        <option value="全家">全家</option>
        <option value="OK">OK</option>
        <option value="萊爾富">萊爾富</option>
        <option value="蝦皮店到店">蝦皮店到店</option>
        <option value="面交">自取（面交）</option>
      </select>
    </div>

    <div class="form-group" id="store-name-wrapper">
      <label for="store">請輸入店名：</label>
      <input type="text" name="store" placeholder="例如：711-台中建成店" />
    </div>

    <div class="form-group" id="cart-details">
      <h3 style="color:#ff1493; text-align:center;">購物車明細</h3>
      <p id="cart-items">目前購物車是空的喔 🛖</p>
    </div>

    <button type="submit" class="checkout-btn">前往結帳</button>
  </form>

  <script>
    const deliverySelect = document.getElementById("delivery-method");
    const storeNameWrapper = document.getElementById("store-name-wrapper");

    deliverySelect.addEventListener("change", function () {
      const val = this.value;
      if (["7-11", "全家", "OK", "萊爾富", "蝦皮店到店"].includes(val)) {
        storeNameWrapper.classList.add("show");
      } else {
        storeNameWrapper.classList.remove("show");
      }
    });

    // 假設這裡抓 localStorage 購物車內容（可根據你的購物車資料調整）
    const cartItems = JSON.parse(localStorage.getItem("cart")) || [];
    const cartDetails = document.getElementById("cart-items");
    if (cartItems.length > 0) {
      let total = 0;
      cartDetails.innerHTML = cartItems.map(item => {
        total += item.price * item.qty;
        return `${item.name} x${item.qty} — NT$${item.price * item.qty}`;
      }).join("<br>") + `<br><br><strong>總金額：NT$${total}</strong>`;
    }
  </script>
</body>
</html>
